<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="Modern Memory Card Game - Multiplayer">
    <title>Memory Game</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen active">
        <div class="splash-content">
            <div class="splash-logo">ğŸ®</div>
            <h1 class="splash-title">RBK</h1>
            <p class="splash-subtitle">GAMING</p>
            <div class="splash-loader">
                <div class="splash-bar"></div>
            </div>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="start-screen" class="screen active splash-hidden">
        <div class="start-container">
            <div class="game-logo">ğŸ´</div>
            <h1 class="game-title">Memory</h1>
            <p class="game-subtitle">KartlarÄ± eÅŸleÅŸtir, hafÄ±zanÄ± test et!</p>

            <div class="mode-selection">
                <button id="solo-btn" class="mode-btn">
                    <span class="mode-icon">ğŸ®</span>
                    <span class="mode-text">Solo Oyna</span>
                </button>
                <button id="multiplayer-btn" class="mode-btn">
                    <span class="mode-icon">ğŸ‘¥</span>
                    <span class="mode-text">Multiplayer</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Solo Size Selection -->
    <div id="solo-screen" class="screen">
        <div class="start-container">
            <button id="back-to-menu" class="back-btn">â† Geri</button>
            <h2 class="screen-title">Solo Oyun</h2>
            <p class="difficulty-label">Zorluk Seviyesi</p>
            <div class="size-options">
                <button class="size-btn" data-size="4">
                    <span class="grid-size">4Ã—4</span>
                    <span class="pair-count">8 Ã§ift</span>
                </button>
                <button class="size-btn" data-size="6">
                    <span class="grid-size">6Ã—6</span>
                    <span class="pair-count">18 Ã§ift</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="lobby-screen" class="screen">
        <div class="start-container">
            <button id="back-to-menu-2" class="back-btn">â† Geri</button>
            <h2 class="screen-title">Multiplayer</h2>

            <div class="lobby-options">
                <button id="create-room-btn" class="lobby-btn">
                    <span class="lobby-icon">ğŸ </span>
                    <span class="lobby-text">Oda OluÅŸtur</span>
                </button>

                <div class="divider"><span>veya</span></div>

                <div class="join-room-section">
                    <input type="text" id="room-code-input" class="room-input" placeholder="Oda Kodu" maxlength="5"
                        inputmode="numeric">
                    <button id="join-room-btn" class="lobby-btn join-btn">
                        <span class="lobby-icon">ğŸšª</span>
                        <span class="lobby-text">KatÄ±l</span>
                    </button>
                </div>
            </div>

            <p id="lobby-error" class="error-text"></p>
        </div>
    </div>

    <!-- Waiting Room -->
    <div id="waiting-room-screen" class="screen">
        <div class="waiting-container">
            <button id="leave-room-btn" class="back-btn">â† AyrÄ±l</button>

            <div class="room-code-display">
                <span class="room-label">Oda Kodu</span>
                <span id="display-room-code" class="room-code">12345</span>
                <button id="copy-code-btn" class="copy-btn">ğŸ“‹</button>
            </div>

            <div class="players-section">
                <div class="player-card host">
                    <span class="player-icon">ğŸ‘‘</span>
                    <span class="player-name">Host</span>
                    <span class="player-status ready">HazÄ±r</span>
                </div>
                <div class="vs-text">VS</div>
                <div id="guest-card" class="player-card guest">
                    <span class="player-icon">â³</span>
                    <span class="player-name">Bekleniyor...</span>
                    <span class="player-status"></span>
                </div>
            </div>

            <!-- Host Controls -->
            <div id="host-controls" class="host-controls hidden">
                <p class="control-label">Board Boyutu</p>
                <div class="size-toggle">
                    <button class="toggle-btn active" data-size="4">4Ã—4</button>
                    <button class="toggle-btn" data-size="6">6Ã—6</button>
                </div>
                <button id="start-game-btn" class="start-btn disabled">
                    ğŸ® Oyunu BaÅŸlat
                </button>
                <p id="start-hint" class="hint-text">Rakip hazÄ±r olunca baÅŸlatabilirsin</p>
            </div>

            <!-- Guest Controls -->
            <div id="guest-controls" class="guest-controls hidden">
                <button id="ready-btn" class="ready-btn">
                    âœ‹ HAZIRIM
                </button>
            </div>
        </div>
    </div>

    <!-- Game Screen (Solo & Multiplayer) -->
    <div id="game-screen" class="screen">
        <!-- Solo Header -->
        <div id="solo-header" class="stats-bar">
            <div class="stat-item">
                <span class="stat-icon">â±ï¸</span>
                <span id="timer" class="stat-value">00:00</span>
                <span class="stat-label">SÃ¼re</span>
            </div>
            <div class="stat-item">
                <span class="stat-icon">ğŸ‘†</span>
                <span id="moves" class="stat-value">0</span>
                <span class="stat-label">Hamle</span>
            </div>
            <div class="stat-item">
                <span class="stat-icon">âœ¨</span>
                <span id="matches" class="stat-value">0/0</span>
                <span class="stat-label">EÅŸleÅŸme</span>
            </div>
        </div>

        <!-- Multiplayer Header -->
        <div id="mp-header" class="mp-stats-bar hidden">
            <div class="mp-player you">
                <span class="mp-player-label">Sen</span>
                <span id="mp-your-score" class="mp-score">0</span>
            </div>
            <div class="mp-center">
                <span id="mp-timer" class="mp-timer">10:00</span>
                <span id="turn-indicator" class="turn-indicator">Senin SÄ±ran</span>
            </div>
            <div class="mp-player opponent">
                <span class="mp-player-label">Rakip</span>
                <span id="mp-opponent-score" class="mp-score">0</span>
            </div>
        </div>

        <div class="board-wrapper">
            <div class="game-board" id="game-board">
                <!-- Cards generated by JS -->
            </div>
        </div>

        <div id="solo-footer" class="action-bar">
            <button id="restart-btn" class="btn btn-primary">
                ğŸ”„ Yeniden
            </button>
            <button id="menu-btn" class="btn btn-secondary">
                ğŸ  MenÃ¼
            </button>
        </div>

        <div id="mp-footer" class="action-bar hidden">
            <button id="mp-leave-btn" class="btn btn-secondary">
                ğŸšª Odadan AyrÄ±l
            </button>
        </div>
    </div>

    <!-- Solo Win Modal -->
    <div id="win-modal" class="modal">
        <div class="modal-box">
            <div class="trophy-icon">ğŸ†</div>
            <h2 class="modal-title">Tebrikler!</h2>
            <p class="modal-subtitle">TÃ¼m kartlarÄ± eÅŸleÅŸtirdin!</p>

            <div class="final-stats">
                <div class="final-stat">
                    <span id="final-time" class="final-stat-value">00:00</span>
                    <span class="final-stat-label">SÃ¼re</span>
                </div>
                <div class="final-stat">
                    <span id="final-moves" class="final-stat-value">0</span>
                    <span class="final-stat-label">Hamle</span>
                </div>
            </div>

            <div class="modal-actions">
                <button id="play-again-btn" class="btn btn-primary">
                    ğŸ® Tekrar Oyna
                </button>
                <button id="change-size-btn" class="btn btn-secondary">
                    ğŸ“ Boyut DeÄŸiÅŸtir
                </button>
            </div>
        </div>
    </div>

    <!-- Multiplayer End Modal -->
    <div id="mp-end-modal" class="modal">
        <div class="modal-box">
            <div id="mp-result-icon" class="trophy-icon">ğŸ†</div>
            <h2 id="mp-result-title" class="modal-title">KazandÄ±n!</h2>
            <p id="mp-result-subtitle" class="modal-subtitle">Tebrikler!</p>

            <div class="final-stats">
                <div class="final-stat">
                    <span id="mp-final-your-score" class="final-stat-value you-color">0</span>
                    <span class="final-stat-label">Sen</span>
                </div>
                <div class="final-stat">
                    <span id="mp-final-opponent-score" class="final-stat-value opponent-color">0</span>
                    <span class="final-stat-label">Rakip</span>
                </div>
            </div>

            <!-- Confirmation status -->
            <div id="mp-confirm-status" class="confirm-status">
                <div id="mp-your-confirm" class="confirm-item">
                    <span class="confirm-icon">â³</span>
                    <span>Sen</span>
                </div>
                <div id="mp-opponent-confirm" class="confirm-item">
                    <span class="confirm-icon">â³</span>
                    <span>Rakip</span>
                </div>
            </div>

            <div class="modal-actions">
                <button id="mp-play-again-btn" class="btn btn-primary">
                    ğŸ® Tekrar Oyna
                </button>
                <button id="mp-return-room-btn" class="btn btn-secondary">
                    ğŸ  Odaya DÃ¶n
                </button>
            </div>
            <p id="mp-confirm-hint" class="hint-text">Her iki oyuncu da onaylamalÄ±</p>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p id="loading-text">BaÄŸlanÄ±yor...</p>
    </div>

    <script src="script.js" type="module"></script>

    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').catch(() => { });
        }
    </script>
</body>

</html>